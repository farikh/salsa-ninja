# File Formats Reference

> UR and REQ file specifications for the do-work skill.

---

## Directory Structure

```
app/do-work/
├── REQ-001.md              # Pending requests (the queue)
├── REQ-002.md
├── user-requests/           # Verbatim user input + assets
│   └── UR-001/
│       ├── input.md
│       └── assets/
└── archive/                 # Completed work (audit trail)
    └── UR-001/
        ├── input.md
        ├── REQ-001-done.md  # Living log with full history
        └── REQ-002-done.md
```

**Note:** The `do-work/` directory lives inside `app/` alongside `.beads/`. All operations run from `app/`.

---

## User Request (UR) — input.md

```yaml
---
id: UR-001
created_at: 2026-02-04T10:00:00Z
requests: [REQ-001, REQ-002]
status: open
---
```

```markdown
# User Request

## Verbatim Input

[Exact text the user provided, preserved word-for-word]

## Assets

[Screenshots or files, if any, stored in assets/ subfolder]
```

---

## Request File (REQ)

### Pending (in queue)

```yaml
---
id: REQ-001
title: Short descriptive title
status: pending
created_at: 2026-02-04T10:00:00Z
user_request: UR-001
bead_id: app-xyz
bead_parent: app-abc
related: [REQ-002]
---
```

```markdown
# Short Descriptive Title

## What

[What needs to be done]

## Context

[Why, background, constraints]
```

### In Progress (being worked)

Frontmatter additions:
```yaml
status: claimed
claimed_at: 2026-02-04T10:30:00Z
route: B
```

Appended sections (living log):
```markdown
---

## Triage

**Route: B** - Medium
**Reasoning:** [Why this route]
**Planning:** Not required

## Exploration

[Codebase context gathered]

*Generated by Explore agent*
```

### Completed (in archive)

Frontmatter additions:
```yaml
status: completed
completed_at: 2026-02-04T10:45:00Z
commit: abc1234
```

Appended sections:
```markdown
## Implementation Summary

[What was changed]

*Completed by work action (Route B)*

## Testing

**Tests run:** cd app && npm run build
**Result:** Build passes, zero errors

*Verified by work action*
```

### Failed

```yaml
status: failed
error: "Brief description of what went wrong"
```

Failed REQs go directly to `archive/`, NOT into UR folders.

---

## Bead ↔ REQ Mapping

| REQ field | Bead field | Sync direction |
|-----------|-----------|---------------|
| `bead_id` | `id` | REQ stores bead ID |
| `title` | `title` | Same |
| `status` | `status` | Beads is authoritative; REQ mirrors |
| (none) | `priority` | Beads only |
| (none) | `dependencies` | Beads only |
| (content) | `description` | REQ has full detail; bead has summary |
